<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<title>报名</title>
<meta name="description" content="网站描述，一般显示在搜索引擎搜索结果中的描述文字，用于介绍网站，吸引浏览者点击。" />
<meta name="keywords" content="网站关键词" />
<meta name="generator" content="MetInfo 5.1.7" />
<link href="favicon.ico" rel="shortcut icon" />
<link rel="stylesheet" type="text/css" href="css/metinfo.css" />
<link rel="stylesheet" type="text/css" href="css/query.css" />
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script src="js/ch.js" type="text/javascript"></script>
</head>
<body>
 <header>
<div class="inner">
<div class="top-logo">
<p class="top-word">浩然考试管理系统</p>
<div style="text-align: right; color: white;">欢迎你
<label id="loginUser">
</label>
</div>

</div>

<nav>
<ul class="list-none">
<li id="nav_10001" style='width:161px;' class='navdown'><a href="index.html" class='nav'><span>网站首页</span></a></li>
<li class="line"></li>
<li id='nav_2' style='width:161px;' ><a href="news.html" class='hover-none nav' ><span>新闻资讯</span></a></li>
<li class="line"></li>
<li id='nav_32' style='width:161px;' ><a href="result.html" class='hover-none nav' ><span>成绩查询</span></a></li>
<li class="line"></li>
<li id='nav_33' style='width:161px;' ><a href="person.html" class='hover-none nav' ><span>个人中心</span></a></li>
<li class="line"></li>
<li id='nav_33' style='width:161px;' ><a href="baoming.html" class='hover-none nav'><span>已报考试</span></a></li>
<li class="line"></li>
<li id='nav_22' style='width:160px;' ><a href="login.html"  class='hover-none nav' ><span>登录</span></a></li>
</ul></nav>
		</div>
	</header>

	<div class="inner met_flash">
		<link href='css/css.css' rel='stylesheet' type='text/css' />
        <script src='js/jquery.bxSlider.min.js'></script>
		<div class="flash">
<a href='#' target='_blank' title='企业网站管理系统'><img src='images/img2.jpg' width='980' alt='企业网站管理系统' height='200'></a>
</div></div>


<div class="sidebar inner">
    
    <div class="sb_box">
	    <h3 class="title">
			<div class="position">当前位置：<a href="index.html" title="网站首页">网站首页</a> &gt; <a href="news.html">考试报名</a></div>
			<span>考试报名</span>
		</h3>
		<div class="clear"></div>

        <div class="active" id="newslist">
			<div class="queryLeft">
	<div id="div1" style="display: block;">
	<div class="c_tits"><span id="parm_sn"></span>考试报名</div>
	<p class="h2" style="font-size:14px;margin-bottom:35px;text-align:center;margin-top:-20px"><span id="parm_subn"></span></p>
		<div id="container" class="show">
		<ol>
			<li><span>考试名称:</span>
				<div>
					<select id="testName" name="test">
					  <option value ="英语四、六级考试">英语四、六级考试</option>
					</select>
				</div><em class='tips' id="nameerror"></em></li>
			<li><span>学号：</span>
				<div>
					<input type="text" id="xh" name="xh" value="" alt="学号">
				</div><em class='tips' id="zkzherror"></em></li>
			<li><span>姓名：</span>
				<div>
					<input type="text" id="name" name="name" value="" alt="姓名">
				</div><em class='tips' id="nameerror"></em></li>
			
			<li style='margin-bottom:8px'><span>&nbsp;</span>&nbsp;&nbsp;<em class='tips' id="all"></em></li>
			<div class="clear"></div>
		</ol>
		
				<div class="s3">
					<input type="button" value="报名" id="submitButton" style="cursor:hand;" onclick="showw();">
				</div>
			
		</div>
	</div>
	<div id="div2" style="display: none;">
		<div class="c_tits"><span id="parm_sn"></span>报名成功</div>
		<p class="h2" style="font-size:14px;margin-bottom:35px;text-align:center;margin-top:-20px"><span id="parm_subn"></span></p>
		<div id="div3"></div>
		<!-- <div id="container"> -->
		<!-- <ol>
			<li><span>考试编号：</span>
				<div>
					01
				</div></li>
			<li><span>考试名称：</span>
				<div>
					英语四、六级考试
				</div></li>
			<li><span>学号：</span>
				<div>
					10
				</div></li>
			<li><span>姓名：</span>
				<div>
					张三
				</div></li>
				<li><span>准考证号：</span>
				<div>
					011010
				</div></li>
				<li><span>考场座位号：</span>
				<div>
					10
				</div></li>
				<li><span>考试时间：</span>
				<div>
					2019-1-2
				</div></li>
			
			<li style='margin-bottom:8px'><span>&nbsp;</span>&nbsp;&nbsp;<em class='tips' id="all"></em></li>
			<div class="clear"></div>
		</ol> -->
		
				<div class="s3">
					<input type="button" value="返回" onclick="back();">
				</div>
			
		</div>
	</div>
	
</div>

		</div>
	</div>
    <div class="clear"></div>
</div>

<footer data-module="2" data-classnow="2">
	<div class="inner">
		<div class="foot-nav"><a href="index.html"  title='网站首页'>网站首页</a><span>|</span>
			<a href="news.html"  title='新闻资讯'>新闻资讯</a><span>|</span>
			<a href="baoming.html"  title='已报考试'>已报考试</a><span>|</span>
			<a href="result.html"  title='成绩查询'>成绩查询</a><span>|</span>
			<a href="person.html"  title='个人中心'>个人中心</a><span>|</span>
			<a href="login.html"  title='登录'>登录</a></div>
		<div class="foot-text">


		</div>
	</div>
</footer>
<script type="text/javascript">
	var eTid;
	var eTnm;
	$(document).ready(function(){
            $.ajax({
              type: "get",
              url: "http://localhost:9090/test/searchAll",
              xhrFields: {
                withCredentials: true
              },
              dataType: "json",
              success: function(result) {
                var html = '';
                for(var i=0;i<result.data.length;i++){
                  html = html + '<option value="' + result.data[i].tsId + '">' + result.data[i].tsName + '</option>';              
                  eTid = result.data[i].tsId;
                  eTnm = result.data[i].tsName;
                }
                $('#testName').append(html);
              }
            })
          });


function showw(){
	var examinee = new Object();
	examinee.eSid = $.trim($("#xh").val());
	examinee.eName = $.trim($("#name").val());
	examinee.eTid = $.trim($("#testName").val());
	console.log(examinee);
	$.ajax({
              type: "post",
              url: "http://localhost:9090/examee/add",
              xhrFields: {
                withCredentials: true
              },
              dataType: "json",
              data:JSON.stringify(examinee),
               contentType: "application/json",
              success:function(result){
                //alert(msg);
                if(result.status){
                    alert("添加成功!");
                    console.log(result);
                    var html = '';
                html = html + '<div id="container"><ol>';
                  html = html + '<li><span>准考证：</span>';
                  html = html + '<div>' + result.data.eEid + '</div></li>';
                  studentId = result.data.sId;
                  html = html + '<li><span>考试名称：</span>';
                  html = html + '<div>' + result.data.eTnm + '</div></li>';
                  html = html + '<li><span>学号：</span>';
                  html = html + '<div>' + result.data.eSid + '</div></li>';
                    $("#loginUser").html(result.data.eName);
                  html = html + '<li><span>姓名：</span>';
                  html = html + '<div>' + result.data.eName + '</div></li>';
                  html = html + '<li><span>考场座位号：</span>';
                  html = html + '<div>' + result.data.ePlace + '</div></li>';
                  html = html + '<li><span>考试时间：</span>';
                  html = html + '<div>' + result.data.eTime + '</div></li>';   
                  html = html+'</ol>';
                  $("#div1").hide();
                $("#div2").show();
                $('#div3').append(html);
                	$("#div3").show();
                }else{
                  alert("添加失败，请重试!");
                }
              }
            })
}
function back(){
	$("#div1").show();
    $("#div2").hide();
}
</script>

</body>
<script type="text/javascript">
	$(document).ready(function(){
		$.ajax({
              type: "get",
              url: "http://localhost:9090/student/loginStudent",
              xhrFields: {
                withCredentials: true
              },
              dataType: 'JSON',
              success: function(result) {
              	console.log(result);
                
              }
            })
            });
</script>
</html>