
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<title>个人中心</title>
<meta name="description" content="网站描述，一般显示在搜索引擎搜索结果中的描述文字，用于介绍网站，吸引浏览者点击。" />
<meta name="keywords" content="网站关键词" />
<meta name="generator" content="MetInfo 5.1.7" />
<link href="favicon.ico" rel="shortcut icon" />
<link rel="stylesheet" type="text/css" href="css/metinfo.css" />
<link rel="stylesheet" type="text/css" href="css/query.css" />
<script src="js/jQuery1.7.2.js" type="text/javascript"></script>
<script src="js/ch.js" type="text/javascript"></script>

</head>
<body>
    <header>
		<div class="inner">
<div class="top-logo">
<p class="top-word">浩然考试管理系统</p>
<div style="text-align: right; color: white;font-size: 15px;">欢迎你<label id="loginUser">
</label></div>
</div>

<nav>
<ul class="list-none">
<li id="nav_10001" style='width:161px;' ><a href="index.html" class='hover-none nav'><span>网站首页</span></a></li>
<li class="line"></li>
<li id='nav_2' style='width:161px;' ><a href="news.html" class='hover-none nav'><span>新闻资讯</span></a></li>
<li class="line"></li>
<li id='nav_32' style='width:161px;' ><a href="result.html" class='hover-none nav'><span>成绩查询</span></a></li>
<li class="line"></li>
<li id='nav_33' style='width:161px;'class='navdown'><a href="person.html" class='nav'><span>个人中心</span></a></li>
<li class="line"></li>
<li id='nav_33' style='width:161px;' ><a href="baoming.html" class='hover-none nav'><span>已报考试</span></a></li>
<li class="line"></li>
<li id='nav_22' style='width:160px;' ><a href="login.html"  class='hover-none nav' ><span>登录</span></a></li>
</ul></nav>
		</div>
	</header>

<div class="con">
	<div class="inner met_flash"><div class="flash">
<a href='#' target='_blank' title='企业网站管理系统'><img src='images/img2.jpg' width='980' alt='企业网站管理系统' height='200'></a>
</div></div>


<div class="sidebar inner">
    
    <div class="sb_box">
	    <h3 class="title">
			<div class="position">当前位置：<a href="index.html" title="网站首页">网站首页</a> &gt; <a href="person.html">个人中心</a></div>
			<span>个人中心</span>
		</h3>
		<div class="clear"></div>

        <div class="active" id="newslist">
			<div class="queryLeft">
	<div class="c_tits"><span id="parm_sn"></span>个人中心</div>
	<p class="h2" style="font-size:14px;margin-bottom:35px;text-align:center;margin-top:-20px"><span id="parm_subn"></span></p>
	<div id="div1" style="display: block;">
			
	
	</div>
	<div id="div2" style="display: none;">
		<div id="container">
		<ol>
			<li><span>请输入原密码：</span>
				<div>
					<input type="password" id="oldpwd" name="oldpwd" value="" alt="原密码" >
				</div></li>
			<li><span>请输入新密码：</span>
				<div>
					<input type="password" id="newpwd" name="newpwd" value="" alt="新密码" >
				</div></li>
			
		</ol>
		
				<div class="s3">
					<input type="button" value="保存" id="submitButton" onclick="save();">
					<input type="button" value="返回" id="submitButton" onclick="back();">
				</div>
			
	</div>
	</div>
	
</div>

		</div>
	</div>
    <div class="clear"></div>
</div>
</div>

<footer data-module="2" data-classnow="2">
	<div class="inner">
		<div class="foot-nav"><a href="index.html"  title='网站首页'>网站首页</a><span>|</span>
			<a href="news.html"  title='新闻资讯'>新闻资讯</a><span>|</span>
			<a href="baoming.html"  title='已报考试'>已报考试</a><span>|</span>
			<a href="result.html"  title='成绩查询'>成绩查询</a><span>|</span>
			<a href="person.html"  title='个人中心'>个人中心</a><span>|</span>
			<a href="login.html"  title='登录'>登录</a></div>
		<div class="foot-text">


		</div>
	</div>
</footer>
<script type="text/javascript">
	var studentId;
	$(document).ready(function(){
		$.ajax({
              type: "get",
              url: "http://localhost:9090/student/loginStudent",
              xhrFields: {
                withCredentials: true
              },
              dataType: 'JSON',
              success: function(result) {
                
               console.log(result);
                var html = '';
                html = html + '<div id="container"><ol>';
                  html = html + '<li><span>学号：</span>';
                  html = html + '<div>' + result.data.sId + '</div></li>';
                  studentId = result.data.sId;
                  html = html + '<li><span>学校：</span>';
                  html = html + '<div>' + result.data.sSch + '</div></li>';
                  html = html + '<li><span>姓名：</span>';
                  html = html + '<div>' + result.data.sName + '</div></li>';
                    $("#loginUser").html(result.data.sName);
                  html = html + '<li><span>专业：</span>';
                  html = html + '<div>' + result.data.sMajor + '</div></li>';
                  html = html + '<li><span>身份证号：</span>';
                  html = html + '<div>' + result.data.sPid + '</div></li>';
                  html = html + '<li><span>班级：</span>';
                  html = html + '<div>' + result.data.sClass + '</div></li>';
                  html = html+'</ol>';
                  html = html + '<div class="s3"><input type="button" value="修改密码" id="submitButton" style="cursor:hand;" onclick="setPwd();"></div></div>'
                  
                $("#div1").show();
                $('#div1').append(html);
                $("#div2").hide();
              }
            })
	});
	function setPwd(){
		$("#div1").hide();
        $("#div2").show();
	}
	function save(){
		var student = new Object();
		student.sId = studentId;
    	student.sPwd = $.trim($("#newpwd").val());
		console.log(student);
    	$.ajax({
        type:"POST",
        url:"http://localhost:9090/student/updatePassword",
        xhrFields: {
            withCredentials: true
        },
        data:JSON.stringify(student),
        dataType: 'JSON',
        contentType: "application/json",
        success:function(result){
                //alert(msg);
                if(result.status)
                {
                	alert("修改成功");
                }else{
                	alert("修改失败");
                }
              }
            });
	}
	function back(){
		$("#div1").show();
        $("#div2").hide();
	}
</script>
<script type="text/javascript">
	$(document).ready(function(){
		$.ajax({
              type: "get",
              url: "http://localhost:9090/student/loginStudent",
              xhrFields: {
                withCredentials: true
              },
              dataType: 'JSON',
              
              success: function(result) {
              	console.log(result);
              
                
              }
            })
            });
</script>
</body>
</html>